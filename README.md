# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура
В ходе разработки приложения "WEB-ларёк" был использован шаблон проектирования - MVP(Model-View-Presenter), который делит модули на три группы:

Model - отвечает за взаимодействие между сервером и интерфейсом.
View - отвечает за отображение интерфейса.
Presenter - отвечает за взаимодействие данных с сервером.

## Интерфейсы
IProductItem - описание типов свойств товара.
IProductItem[] - описание типов свойств каталога товаров.
IOrder - описание типов свойств заказа.
IOrderResult - описание типов свойств итогового заказа.
IAppState - описание типов свойств каталога, корзины, товара.
IEvents - описание типов методов событий подписки, отписки и уведомления подписчиков.

IContacts - описание типов контактных данных.
IFormState - описание типов результатов валидации.
IModalData - описание типов HTML контента.
ISuccess - описание типов успешного заказа.
IBasketView - описание типов HTML элемента карточки товара в корзине и количества товаров в корзине.
ICardBasket - описание типов названия и стоимости товара в корзине.

## Описание данных
### Model
1. class Model - абстрактный базовый класс для создания объекта хранения данных приложения.
  Методы:
  emitChanges - сообщает подписчикам о том, что модель поменялась.
2. class AppState - содержит методы управляющие состояниями приложения. 
  Методы:
  throwInBasket - добавляет переданный элемент в корзину и затем сообщает об изменении в корзине.
  removeInBasket - удаляет товар из корзины.
  clearOrder - очищает поля заказа.
  clearBasket - очищает корзину с заказом. 
  getTotal - возвращает общую сумму заказа в корзине.
  setCatalog - передает в модель данных массив товаров, запускает событие изменения каталога товаров в модели данных.
  setPreview - устанавливает идентификатор элемента item в свойство preview класса и затем сообщает о изменении превью
  checkContentBasket - возвращает содержимое корзины.
  checkBasket - проверяет находится ли item - товар в корзине.
  setOrder - передает данные из корзины в заказ.
  setOrderField - устанавливает значение в свойство order класса, валидирует поле контактов.
  setPayment - передает данные о способе оплаты в заказ, валидирует поле доставки. 
  setAddress - передает данные адреса в заказ, валидирует поле доставки. 
  setEmail - передает email в заказ, валидирует поле контактов.
  setPhone - передает номер телефона в заказ, валидирует поле контактов. 
  validateOrderPay - валидация модального окна со способом оплаты и адресом.
  validateOrderContacts - валидация формы контактов.

### View
1. class Component - абстрактный базовый класс для работы с элементами DOM.
  Методы:
  toggleClass - переключает класс в DOM.
  setText - устанавливает текст в textContent.
  setDisabled - устанавливает и снимает статус блокровки disabled.
  setHidden - меняет свойство display на none.
  setVisible - удаляет свойство display, показывая контент.
  setImage - устанавливает изображение с алтернативным текстом.
  render - возвращает корневой DOM-элемент.
2. class Basket - функционал для отображения элементов корзины и её состояния.
  Методы:
  set items - устанавливает список элементов items в определенное состояние. Если items.length больше нуля, метод заменяет содержимое элемента _list новыми элементами и снимает блокировку с кнопки _button. Если items.length равно нулю, метод заменяет содержимое элемента _list на параграф с текстом "Корзина пуста" и блокирует кнопку _button.
  set total - устанавливает текст к итоговой сумме заказа "n синапсов".
3. class Form - функионал отрисовки стилей валидации форм.
  Методы:
  onInputChange - вызывает событие с помощью this.events.emit, передавая в него строку, которая представляет собой имя поля ввода и field, а также значение value.
  set valid - меняет кнопку отправки формы.
  set errors - устанавливает текст при ошибке.
  render - рендерит форму, используя состояние state.
4. class Modal - функционал для отображения и закрытия модальных окон.
  Методы:
  set content - устанавливает содержимое модального окна в классе.
  open - открывает модальное окно.
  close - закрывает модальное окно.
  render - рендерит модальное окно с данными data.
5. class Order - функционал для формы оформления заказа: способ оплаты и адресс доставки.
  Методы:
  setClass - устанавливает класс для кнопки с определенным именем.
  set address - устанавливает адрес в поле ввода с именем 'address'.
6. class Success - функционал отображения окна, сообщающего об успешном заказе.
7. calss Page - функционал отображения главной страницы.
  Методы:
  set counter - устанавливает значение счетчика в классе.
  set catalog - устанавливает каталог в классе.
  set locked - устанавливает состояние блокировки в классе.
8. class Card - функционал для отображения данных карточки товара.
  Методы:
  set title - устанавливает заголовок для объекта класса. 
  set description - устанавливает описание для объекта класса.
  set image - устанавливает изображение для объекта класса.
  set price - устанавливает цену для объекта класса.
  get price - возвращает цену объекта класса как число.
  set category - устанавливает категорию для объекта класса.
  set button - устанавливает текст для кнопки объекта класса.
9. class CardBasket - отвечает за отображение информации о карте в корзине.
  Методы:
  set title - устанавливает текст в элементе _title.
  set index - устанавливает текст в элементе _index.
  set price - устанавливает текст в элементе _price.
10. class Contacts - функционал для отображения формы с контактными данными: email и телефон.
  Методы:
  set phone - устанавливает форму ввода номера телефона.
  set email - устанавливает форму ввода email.

### Presenter
1. class EventEmitter - базовый класс, отвечающий за обработку событий. Имплементируется интерфйесом IEvents.
  Методы:
  on - устанавливает обработчик на событие.
  off - снимает обработчик с события.
  emit - инициирует событие с данными.
  onAll - слушает все события.
  offAll - сбрасывает все обработчики.
  trigger - создает коллбек триггер, генерирующий событие при вызове.
2. class Api - базовый класс, отвечающий за работу с сервером посредством запросов на получение (GET) и отправку (POST) данных.
  Методы:
  handleResponse - обрабатывает ответ от сервера. В зависимости от ответа возвращает данные или ошибку.
  get - выполняет GET-запрос к серверу по uri.
  post - выполняет POST-запрос к серверу по uri.
3. class WebLarekApi - потомок класса Api. Обеспечивает обмен данных между сервером и моделью данных приложения.
  Методы:
  getProductItem - делает запрос к серверу для получения информации о продукте по его ID.
  getProductList - делает запрос к серверу для получения списка продуктов.
  orderProducts - делает POST-запрос к серверу для оформления заказа.



